<UserControl x:Class="LMS.SystemModule.Views.Readers.ReaderListView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:LMS.SystemModule.Views.Readers"
             xmlns:pager="clr-namespace:LMS.Controls;assembly=LMS.Controls"
             mc:Ignorable="d" >
    <StackPanel>
        <GroupBox Header="读者信息查询" Margin="10 20 10 0">
            <UniformGrid Columns="4">
                <WrapPanel>
                    <TextBlock Text="图书编号：" />
                    <TextBox Text="{Binding BookId}" Width="120" />
                </WrapPanel>
                <WrapPanel>
                    <TextBlock Text="图书名称：" />
                    <TextBox Text="{Binding BookName}" Width="120" />
                </WrapPanel>
                <WrapPanel>
                    <TextBlock Text="图书作者：" />
                    <TextBox Text="{Binding BookWriter}" Width="120" />
                </WrapPanel>
                <WrapPanel>
                    <Button Command="{Binding QueryBookCommand}" Content="查询" Width="120" />
                </WrapPanel>
            </UniformGrid>
        </GroupBox>
        <GroupBox Header="读者信息列表" Margin="10 10 10 0">
            <StackPanel>
                <DataGrid Height="450" CanUserAddRows="False" ItemsSource="{Binding BookList}" AutoGenerateColumns="False" 
                      SelectionMode="Single" IsReadOnly="True" SelectionUnit="FullRow" CanUserDeleteRows="False" CanUserResizeRows="False" ScrollViewer.CanContentScroll="False" >
                    <DataGrid.Columns>
                        <DataGridTextColumn Width="0.5*" Binding="{Binding BookId}" Header="编号" />
                        <DataGridTextColumn Width="*" Binding="{Binding BookName}" Header="名称" />
                        <DataGridTextColumn Width="*" Binding="{Binding BookWriter}" Header="作者" />
                        <DataGridTextColumn Width="0.6*" Binding="{Binding BookPrice}" Header="价格" />
                        <DataGridTextColumn Width="0.8*" Binding="{Binding PublishTime,StringFormat={}{0:yyyy-MM-dd}}" Header="发版日期" />
                        <DataGridTextColumn Width="0.5*" Binding="{Binding BookCount}" Header="数量" />
                        <DataGridTextColumn Width="0.7*" Binding="{Binding BookSurplus}" Header="剩余数量" />
                        <DataGridTemplateColumn Header="操作">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <StackPanel Orientation="Horizontal">
                                            <Button Content="编辑" Command="{Binding DataContext.InitUpdateBookCommand, ElementName=queryBook}" CommandParameter="{Binding BookId}" Margin="0 0 10 0" />
                                            <Button Content="删除" Command="{Binding DataContext.DeleteBookCommand, RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=UserControl}}" CommandParameter="{Binding BookId}"/>
                                        </StackPanel>
                                    </Grid>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
                <StackPanel>
                    <pager:Pagination Height="35" VerticalAlignment="Bottom" HorizontalAlignment="Right" DataContext="{Binding PageModel}" />
                </StackPanel>
            </StackPanel>
        </GroupBox>
    </StackPanel>
</UserControl>
